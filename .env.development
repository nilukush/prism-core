# PRISM Local Development Environment Configuration
# This file contains safe defaults for local development
# Copy to .env to use with docker-compose

# ============================================================================
# APPLICATION
# ============================================================================

APP_NAME=PRISM
APP_VERSION=0.1.0
APP_ENV=development
NODE_ENV=development
API_PREFIX=/api/v1
ENVIRONMENT=development
DEBUG=true

# ============================================================================
# SECURITY - Development defaults (DO NOT USE IN PRODUCTION)
# ============================================================================

# Stable secrets for consistent development experience
SECRET_KEY=dev-secret-key-do-not-use-in-production
JWT_SECRET_KEY=dev-secret-key-do-not-use-in-production
ENCRYPTION_KEY=dev-encryption-key-do-not-use-in-production
NEXTAUTH_SECRET=dev-nextauth-secret-do-not-use-in-production

# ============================================================================
# DATABASE
# ============================================================================

DATABASE_URL=postgresql+asyncpg://prism_dev:prism_dev@postgres:5432/prism_dev
POSTGRES_USER=prism_dev
POSTGRES_PASSWORD=prism_dev
POSTGRES_DB=prism_dev

# Database pool settings
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30

# ============================================================================
# REDIS
# ============================================================================

REDIS_URL=redis://:redis_dev@redis:6379/0
REDIS_PASSWORD=redis_dev
REDIS_POOL_SIZE=10

# ============================================================================
# URLS
# ============================================================================

FRONTEND_URL=http://localhost:3100
BACKEND_URL=http://localhost:8100
NEXT_PUBLIC_API_URL=http://localhost:8100
NEXT_PUBLIC_APP_URL=http://localhost:3100

# ============================================================================
# CORS
# ============================================================================

CORS_ORIGINS=["http://localhost:3000", "http://localhost:3100", "http://localhost:8100"]
BACKEND_CORS_ORIGINS=["http://localhost:3000", "http://localhost:3100"]

# ============================================================================
# SESSION MANAGEMENT - Shorter TTLs for development
# ============================================================================

USE_PERSISTENT_SESSIONS=false  # Disable for simpler local dev
SESSION_TTL=3600              # 1 hour
TOKEN_FAMILY_TTL=7200         # 2 hours
BLACKLIST_TTL=3600            # 1 hour
ACCESS_TOKEN_TTL=300          # 5 minutes
REFRESH_TOKEN_TTL=3600        # 1 hour
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=5
JWT_REFRESH_TOKEN_EXPIRE_DAYS=1  # 1 day for development

# Session configuration
SESSION_ID_BYTES=32
SESSION_BINDING_ENABLED=true
TOKEN_ROTATION_ENABLED=true
TOKEN_REUSE_WINDOW=10
SESSION_CLEANUP_INTERVAL=300  # 5 minutes

# ============================================================================
# RATE LIMITING - Relaxed for development
# ============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_STRATEGY=token_bucket

# General limits - very permissive
RATE_LIMIT_PER_SECOND=100
RATE_LIMIT_PER_MINUTE=1000
RATE_LIMIT_PER_HOUR=10000
RATE_LIMIT_PER_DAY=100000
RATE_LIMIT_BURST=50
RATE_LIMIT_BLOCK_DURATION=60  # 1 minute

# Auth endpoints - still limited but reasonable
RATE_LIMIT_AUTH_PER_SECOND=10
RATE_LIMIT_AUTH_PER_MINUTE=100
RATE_LIMIT_AUTH_PER_HOUR=1000
RATE_LIMIT_AUTH_PER_DAY=10000

# AI endpoints - generous for testing
RATE_LIMIT_AI_PER_SECOND=5
RATE_LIMIT_AI_PER_MINUTE=50
RATE_LIMIT_AI_PER_HOUR=500
RATE_LIMIT_AI_PER_DAY=5000

# DDoS Protection - disabled for development
DDOS_PROTECTION_ENABLED=false
DDOS_CHALLENGE_ENABLED=false

# ============================================================================
# SECURITY HEADERS - Relaxed for development
# ============================================================================

# CSP - Allow unsafe-eval and unsafe-inline for development tools
CSP_SCRIPT_SRC=self unsafe-inline unsafe-eval https://cdn.jsdelivr.net
CSP_STYLE_SRC=self unsafe-inline https://fonts.googleapis.com
CSP_CONNECT_SRC=self ws://localhost:* wss://localhost:* http://localhost:* https://api.openai.com https://api.anthropic.com

# HSTS - Disabled for local development
HSTS_MAX_AGE=0
HSTS_INCLUDE_SUBDOMAINS=false
HSTS_PRELOAD=false

# ============================================================================
# EMAIL - Console output for development
# ============================================================================

EMAIL_ENABLED=false
EMAIL_VERIFICATION_REQUIRED=false
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@localhost
SMTP_FROM_NAME=PRISM Dev
SUPPORT_EMAIL=support@localhost

# ============================================================================
# AI SERVICES
# ============================================================================

# Add your API keys here for testing
OPENAI_API_KEY=
ANTHROPIC_API_KEY=

# Default models
DEFAULT_LLM_PROVIDER=openai
DEFAULT_LLM_MODEL=gpt-3.5-turbo
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000
LLM_REQUEST_TIMEOUT=30

# ============================================================================
# MONITORING - Disabled for development
# ============================================================================

SENTRY_ENABLED=false
OTEL_ENABLED=false
PROMETHEUS_ENABLED=false

# ============================================================================
# LOGGING
# ============================================================================

LOG_LEVEL=DEBUG
LOG_FORMAT=json
LOG_FILE_PATH=./logs/prism-dev.log
LOG_FILE_ROTATION=daily
LOG_FILE_RETENTION=7

# ============================================================================
# STORAGE
# ============================================================================

STORAGE_BACKEND=local
STORAGE_LOCAL_PATH=./uploads

# ============================================================================
# FEATURE FLAGS
# ============================================================================

FEATURE_ANALYTICS_ENABLED=true
FEATURE_MARKETPLACE_ENABLED=false
FEATURE_ENTERPRISE_SSO_ENABLED=false
FEATURE_MULTI_TENANCY_ENABLED=false

# ============================================================================
# CACHE
# ============================================================================

CACHE_TTL_DEFAULT=60          # 1 minute
CACHE_TTL_DOCUMENTS=300       # 5 minutes
CACHE_TTL_ANALYTICS=120       # 2 minutes

# ============================================================================
# AUDIT
# ============================================================================

AUDIT_ENABLED=true
AUDIT_RETENTION_DAYS=7  # Keep only 1 week in dev

# ============================================================================
# CELERY
# ============================================================================

CELERY_BROKER_URL=redis://:redis_dev@redis:6379/1
CELERY_RESULT_BACKEND=redis://:redis_dev@redis:6379/2
CELERY_REDIS_PASSWORD=redis_dev
CELERY_TASK_DEFAULT_QUEUE=development
CELERY_TASK_MAX_RETRIES=1
CELERY_TASK_RETRY_DELAY=5

# ============================================================================
# VECTOR DATABASE
# ============================================================================

QDRANT_URL=http://qdrant:6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=prism_dev_documents

# ============================================================================
# FRONTEND DEVELOPMENT
# ============================================================================

# API timeouts - shorter for development
NEXT_PUBLIC_API_TIMEOUT=10000         # 10 seconds
NEXT_PUBLIC_API_UPLOAD_TIMEOUT=60000  # 1 minute
NEXT_PUBLIC_API_RETRY_ATTEMPTS=1

# Development-friendly cookie settings
NEXT_PUBLIC_COOKIE_SAME_SITE=lax
NEXT_PUBLIC_COOKIE_SECURE=false

# ============================================================================
# DEVELOPMENT TOOLS
# ============================================================================

# Enable development endpoints
ENABLE_DEBUG_ENDPOINTS=true
ENABLE_API_DOCS=true

# Development database settings
POSTGRES_LOGGING=true
REDIS_LOGGING=true

# Python settings
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# Node.js settings
NODE_OPTIONS=--max-old-space-size=2048